{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/ayu/Documents/Predection-Market/Frontend/lib/wallet-context.tsx"],"sourcesContent":["\"use client\"\n\nimport { createContext, useContext, useState, useEffect, type ReactNode } from \"react\"\nimport { ethers, type Eip1193Provider } from 'ethers'\n\n// Proper TypeScript types for MetaMask/Ethereum provider\ninterface EthereumProvider extends Eip1193Provider {\n  request(args: { method: 'eth_requestAccounts' }): Promise<string[]>\n  request(args: { method: 'eth_getBalance'; params: [string, string] }): Promise<string>\n  request(args: { method: 'wallet_switchEthereumChain'; params: [{ chainId: string }] }): Promise<null>\n  request(args: { method: 'wallet_addEthereumChain'; params: [AddEthereumChainParameter] }): Promise<null>\n  request(args: { method: string; params?: unknown[] }): Promise<unknown>\n  on(event: 'accountsChanged', handler: (accounts: string[]) => void): void\n  on(event: 'chainChanged', handler: (chainId: string) => void): void\n  on(event: string, handler: (...args: any[]) => void): void\n  removeListener(event: 'accountsChanged', handler: (accounts: string[]) => void): void\n  removeListener(event: 'chainChanged', handler: (chainId: string) => void): void\n  removeListener(event: string, handler: (...args: any[]) => void): void\n}\n\ninterface AddEthereumChainParameter {\n  chainId: string\n  chainName: string\n  nativeCurrency: {\n    name: string\n    symbol: string\n    decimals: number\n  }\n  rpcUrls: string[]\n  blockExplorerUrls: string[]\n}\n\ninterface WalletContextType {\n  account: string | null\n  isConnected: boolean\n  connect: () => Promise<void>\n  disconnect: () => void\n  balance: string | null\n}\n\nconst WalletContext = createContext<WalletContextType | undefined>(undefined)\n\nexport function WalletProvider({ children }: { children: ReactNode }) {\n  const [account, setAccount] = useState<string | null>(null)\n  const [balance, setBalance] = useState<string | null>(null)\n\n  // Check if we're in development and add a mock ethereum provider\n  useEffect(() => {\n    if (typeof window !== 'undefined' && !window.ethereum && process.env.NODE_ENV === 'development') {\n      console.warn('No Ethereum provider found. Install MetaMask or another Web3 wallet.')\n    }\n  }, [])\n\n  const connect = async () => {\n    const ethereum = window.ethereum as EthereumProvider | undefined\n    \n    if (!ethereum) {\n      alert(\"Please install MetaMask or another Web3 wallet\")\n      return\n    }\n\n    if (typeof ethereum.request !== 'function') {\n      alert(\"Ethereum provider is not properly initialized\")\n      return\n    }\n\n    try {\n      const accounts = await ethereum.request({ method: \"eth_requestAccounts\" })\n      \n      if (!accounts || accounts.length === 0) {\n        alert(\"No accounts found. Please check your wallet.\")\n        return\n      }\n      \n      setAccount(accounts[0])\n\n      // Get balance\n      const balanceWei = await ethereum.request({\n        method: \"eth_getBalance\",\n        params: [accounts[0], \"latest\"],\n      })\n      const balanceNum = Number.parseInt(balanceWei, 16) / 1e18\n      setBalance(balanceNum.toFixed(4))\n\n      // Switch to BNB Smart Chain (chainId 56)\n      try {\n        await ethereum.request({\n          method: \"wallet_switchEthereumChain\",\n          params: [{ chainId: \"0x38\" }],\n        })\n      } catch (switchError: unknown) {\n        if ((switchError as any).code === 4902) {\n          // Chain not added, add it\n          await ethereum.request({\n            method: \"wallet_addEthereumChain\",\n            params: [\n              {\n                chainId: \"0x38\",\n                chainName: \"BNB Smart Chain\",\n                nativeCurrency: {\n                  name: \"BNB\",\n                  symbol: \"BNB\",\n                  decimals: 18,\n                },\n                rpcUrls: [\"https://bsc-dataseed1.binance.org:443\"],\n                blockExplorerUrls: [\"https://bscscan.com\"],\n              },\n            ],\n          })\n        }\n      }\n    } catch (error) {\n      console.error(\"Failed to connect wallet:\", error)\n      alert(`Failed to connect wallet: ${error instanceof Error ? error.message : 'Unknown error'}`)\n    }\n  }\n\n  const disconnect = () => {\n    setAccount(null)\n    setBalance(null)\n  }\n\n  useEffect(() => {\n    const ethereum = window.ethereum as EthereumProvider | undefined\n    \n    if (ethereum) {\n      const handleAccountsChanged = (...args: any[]) => {\n        const accounts = args[0] as string[]\n        if (accounts.length === 0) {\n          disconnect()\n        } else {\n          setAccount(accounts[0])\n        }\n      }\n\n      const handleChainChanged = (...args: any[]) => {\n        window.location.reload()\n      }\n\n      // Listen for account changes\n      ethereum.on(\"accountsChanged\", handleAccountsChanged)\n\n      // Listen for chain changes\n      ethereum.on(\"chainChanged\", handleChainChanged)\n\n      // Cleanup\n      return () => {\n        ethereum.removeListener(\"accountsChanged\", handleAccountsChanged)\n        ethereum.removeListener(\"chainChanged\", handleChainChanged)\n      }\n    }\n  }, [])\n\n  return (\n    <WalletContext.Provider\n      value={{\n        account,\n        isConnected: !!account,\n        connect,\n        disconnect,\n        balance,\n      }}\n    >\n      {children}\n    </WalletContext.Provider>\n  )\n}\n\nexport function useWallet() {\n  const context = useContext(WalletContext)\n  if (!context) {\n    throw new Error(\"useWallet must be used within WalletProvider\")\n  }\n  return context\n}\n\n// Helper function for getting accounts\nexport const getAccounts = async (): Promise<string[]> => {\n  if (!window.ethereum) return []\n  \n  try {\n    const accounts = await window.ethereum.request({ method: \"eth_requestAccounts\" })\n    return accounts\n  } catch (error) {\n    console.error(\"Error getting accounts:\", error)\n    return []\n  }\n}\n\n// Helper for creating ethers provider\nexport const getEthersProvider = () => {\n  const ethereum = window.ethereum as EthereumProvider | undefined\n  \n  if (!ethereum) {\n    throw new Error(\"Ethereum provider not found\")\n  }\n  return new ethers.BrowserProvider(ethereum)\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 196, "column": 0}, "map": {"version":3,"sources":["file:///home/ayu/Documents/Predection-Market/Frontend/components/providers.tsx"],"sourcesContent":["\"use client\"\n\nimport { WalletProvider } from \"@/lib/wallet-context\"\nimport type { ReactNode } from \"react\"\n\nexport function Providers({ children }: { children: ReactNode }) {\n  return <WalletProvider>{children}</WalletProvider>\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAKO,SAAS,UAAU,EAAE,QAAQ,EAA2B;IAC7D,qBAAO,6LAAC,8IAAc;kBAAE;;;;;;AAC1B;KAFgB","debugId":null}}]
}